image: docker:19.03.1

variables:
  DOCKER_TLS_CERTDIR: "/certs"

services:
  - docker:19.03.1-dind

before_script:
  - docker info
build:
    stage: build
    script:
        - apk add --no-cache py-pip python-dev libffi-dev openssl-dev gcc libc-dev make
        - pip install docker-compose
        - docker-compose build
        - docker-compose up -d

test:
    stage: test
    script:
      - echo "testing"
      - apt-get update -y
      - apt-get install curl -y
      - curl http://localhost:4000/init
      - curl http://localhost:4200/
